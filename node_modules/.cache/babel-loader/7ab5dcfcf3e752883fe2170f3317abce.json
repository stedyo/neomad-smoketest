{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.create = create;\nexports.createFunction = createFunction;\nexports.createTrigger = createTrigger;\nexports.getFunction = getFunction;\nexports.getFunctions = getFunctions;\nexports.getTrigger = getTrigger;\nexports.getTriggers = getTriggers;\nexports.remove = remove;\nexports.removeFunction = removeFunction;\nexports.removeTrigger = removeTrigger;\nexports.update = update;\nexports.updateFunction = updateFunction;\nexports.updateTrigger = updateTrigger;\n\nvar _CoreManager = _interopRequireDefault(require(\"./CoreManager\"));\n\nvar _decode = _interopRequireDefault(require(\"./decode\"));\n\nvar _ParseError = _interopRequireDefault(require(\"./ParseError\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction getFunctions() {\n  return _CoreManager.default.getHooksController().get('functions');\n}\n\nfunction getTriggers() {\n  return _CoreManager.default.getHooksController().get('triggers');\n}\n\nfunction getFunction(name) {\n  return _CoreManager.default.getHooksController().get('functions', name);\n}\n\nfunction getTrigger(className, triggerName) {\n  return _CoreManager.default.getHooksController().get('triggers', className, triggerName);\n}\n\nfunction createFunction(functionName, url) {\n  return create({\n    functionName: functionName,\n    url: url\n  });\n}\n\nfunction createTrigger(className, triggerName, url) {\n  return create({\n    className: className,\n    triggerName: triggerName,\n    url: url\n  });\n}\n\nfunction create(hook) {\n  return _CoreManager.default.getHooksController().create(hook);\n}\n\nfunction updateFunction(functionName, url) {\n  return update({\n    functionName: functionName,\n    url: url\n  });\n}\n\nfunction updateTrigger(className, triggerName, url) {\n  return update({\n    className: className,\n    triggerName: triggerName,\n    url: url\n  });\n}\n\nfunction update(hook) {\n  return _CoreManager.default.getHooksController().update(hook);\n}\n\nfunction removeFunction(functionName) {\n  return remove({\n    functionName: functionName\n  });\n}\n\nfunction removeTrigger(className, triggerName) {\n  return remove({\n    className: className,\n    triggerName: triggerName\n  });\n}\n\nfunction remove(hook) {\n  return _CoreManager.default.getHooksController().remove(hook);\n}\n\nconst DefaultController = {\n  get(type, functionName, triggerName) {\n    let url = '/hooks/' + type;\n\n    if (functionName) {\n      url += '/' + functionName;\n\n      if (triggerName) {\n        url += '/' + triggerName;\n      }\n    }\n\n    return this.sendRequest('GET', url);\n  },\n\n  create(hook) {\n    let url;\n\n    if (hook.functionName && hook.url) {\n      url = '/hooks/functions';\n    } else if (hook.className && hook.triggerName && hook.url) {\n      url = '/hooks/triggers';\n    } else {\n      return Promise.reject({\n        error: 'invalid hook declaration',\n        code: 143\n      });\n    }\n\n    return this.sendRequest('POST', url, hook);\n  },\n\n  remove(hook) {\n    let url;\n\n    if (hook.functionName) {\n      url = '/hooks/functions/' + hook.functionName;\n      delete hook.functionName;\n    } else if (hook.className && hook.triggerName) {\n      url = '/hooks/triggers/' + hook.className + '/' + hook.triggerName;\n      delete hook.className;\n      delete hook.triggerName;\n    } else {\n      return Promise.reject({\n        error: 'invalid hook declaration',\n        code: 143\n      });\n    }\n\n    return this.sendRequest('PUT', url, {\n      __op: 'Delete'\n    });\n  },\n\n  update(hook) {\n    let url;\n\n    if (hook.functionName && hook.url) {\n      url = '/hooks/functions/' + hook.functionName;\n      delete hook.functionName;\n    } else if (hook.className && hook.triggerName && hook.url) {\n      url = '/hooks/triggers/' + hook.className + '/' + hook.triggerName;\n      delete hook.className;\n      delete hook.triggerName;\n    } else {\n      return Promise.reject({\n        error: 'invalid hook declaration',\n        code: 143\n      });\n    }\n\n    return this.sendRequest('PUT', url, hook);\n  },\n\n  sendRequest(method, url, body) {\n    return _CoreManager.default.getRESTController().request(method, url, body, {\n      useMasterKey: true\n    }).then(res => {\n      const decoded = (0, _decode.default)(res);\n\n      if (decoded) {\n        return Promise.resolve(decoded);\n      }\n\n      return Promise.reject(new _ParseError.default(_ParseError.default.INVALID_JSON, 'The server returned an invalid response.'));\n    });\n  }\n\n};\n\n_CoreManager.default.setHooksController(DefaultController);","map":{"version":3,"sources":["/Users/szd/Dev/ycomms-smoketest-landing-page/node_modules/parse/lib/node/ParseHooks.js"],"names":["Object","defineProperty","exports","value","create","createFunction","createTrigger","getFunction","getFunctions","getTrigger","getTriggers","remove","removeFunction","removeTrigger","update","updateFunction","updateTrigger","_CoreManager","_interopRequireDefault","require","_decode","_ParseError","obj","__esModule","default","getHooksController","get","name","className","triggerName","functionName","url","hook","DefaultController","type","sendRequest","Promise","reject","error","code","__op","method","body","getRESTController","request","useMasterKey","then","res","decoded","resolve","INVALID_JSON","setHooksController"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.create = create;\nexports.createFunction = createFunction;\nexports.createTrigger = createTrigger;\nexports.getFunction = getFunction;\nexports.getFunctions = getFunctions;\nexports.getTrigger = getTrigger;\nexports.getTriggers = getTriggers;\nexports.remove = remove;\nexports.removeFunction = removeFunction;\nexports.removeTrigger = removeTrigger;\nexports.update = update;\nexports.updateFunction = updateFunction;\nexports.updateTrigger = updateTrigger;\n\nvar _CoreManager = _interopRequireDefault(require(\"./CoreManager\"));\n\nvar _decode = _interopRequireDefault(require(\"./decode\"));\n\nvar _ParseError = _interopRequireDefault(require(\"./ParseError\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction getFunctions() {\n  return _CoreManager.default.getHooksController().get('functions');\n}\n\nfunction getTriggers() {\n  return _CoreManager.default.getHooksController().get('triggers');\n}\n\nfunction getFunction(name) {\n  return _CoreManager.default.getHooksController().get('functions', name);\n}\n\nfunction getTrigger(className, triggerName) {\n  return _CoreManager.default.getHooksController().get('triggers', className, triggerName);\n}\n\nfunction createFunction(functionName, url) {\n  return create({\n    functionName: functionName,\n    url: url\n  });\n}\n\nfunction createTrigger(className, triggerName, url) {\n  return create({\n    className: className,\n    triggerName: triggerName,\n    url: url\n  });\n}\n\nfunction create(hook) {\n  return _CoreManager.default.getHooksController().create(hook);\n}\n\nfunction updateFunction(functionName, url) {\n  return update({\n    functionName: functionName,\n    url: url\n  });\n}\n\nfunction updateTrigger(className, triggerName, url) {\n  return update({\n    className: className,\n    triggerName: triggerName,\n    url: url\n  });\n}\n\nfunction update(hook) {\n  return _CoreManager.default.getHooksController().update(hook);\n}\n\nfunction removeFunction(functionName) {\n  return remove({\n    functionName: functionName\n  });\n}\n\nfunction removeTrigger(className, triggerName) {\n  return remove({\n    className: className,\n    triggerName: triggerName\n  });\n}\n\nfunction remove(hook) {\n  return _CoreManager.default.getHooksController().remove(hook);\n}\n\nconst DefaultController = {\n  get(type, functionName, triggerName) {\n    let url = '/hooks/' + type;\n\n    if (functionName) {\n      url += '/' + functionName;\n\n      if (triggerName) {\n        url += '/' + triggerName;\n      }\n    }\n\n    return this.sendRequest('GET', url);\n  },\n\n  create(hook) {\n    let url;\n\n    if (hook.functionName && hook.url) {\n      url = '/hooks/functions';\n    } else if (hook.className && hook.triggerName && hook.url) {\n      url = '/hooks/triggers';\n    } else {\n      return Promise.reject({\n        error: 'invalid hook declaration',\n        code: 143\n      });\n    }\n\n    return this.sendRequest('POST', url, hook);\n  },\n\n  remove(hook) {\n    let url;\n\n    if (hook.functionName) {\n      url = '/hooks/functions/' + hook.functionName;\n      delete hook.functionName;\n    } else if (hook.className && hook.triggerName) {\n      url = '/hooks/triggers/' + hook.className + '/' + hook.triggerName;\n      delete hook.className;\n      delete hook.triggerName;\n    } else {\n      return Promise.reject({\n        error: 'invalid hook declaration',\n        code: 143\n      });\n    }\n\n    return this.sendRequest('PUT', url, {\n      __op: 'Delete'\n    });\n  },\n\n  update(hook) {\n    let url;\n\n    if (hook.functionName && hook.url) {\n      url = '/hooks/functions/' + hook.functionName;\n      delete hook.functionName;\n    } else if (hook.className && hook.triggerName && hook.url) {\n      url = '/hooks/triggers/' + hook.className + '/' + hook.triggerName;\n      delete hook.className;\n      delete hook.triggerName;\n    } else {\n      return Promise.reject({\n        error: 'invalid hook declaration',\n        code: 143\n      });\n    }\n\n    return this.sendRequest('PUT', url, hook);\n  },\n\n  sendRequest(method, url, body) {\n    return _CoreManager.default.getRESTController().request(method, url, body, {\n      useMasterKey: true\n    }).then(res => {\n      const decoded = (0, _decode.default)(res);\n\n      if (decoded) {\n        return Promise.resolve(decoded);\n      }\n\n      return Promise.reject(new _ParseError.default(_ParseError.default.INVALID_JSON, 'The server returned an invalid response.'));\n    });\n  }\n\n};\n\n_CoreManager.default.setHooksController(DefaultController);"]},"metadata":{},"sourceType":"script"}